<!DOCTYPE html>
<html>
<head>
<title>Tic Tac Toe - Rob Hefty</title>
<link rel="stylesheet" type="text/css" href="stylesheets/tic_tac_style.css" />
<script type="text/javascript" src="../scripts/jquery-1.4.js"></script>
<script type="text/javascript" src="../scripts/jqia2.support.js"></script>
<script type="text/javascript">
var clickCount=0;
var boolWinner=new Boolean();
var cellArray=["a","a","a","a","a","a","a","a","a"];
$('table#tictactoe td').bind('click, hover',function(event){});
$(document).ready(function(){
	var Xwins=0;
	var Owins=0;
	var Catwins=0;
	boolWinner=false;
	document.getElementById('xcell').innerHTML=Xwins;
	document.getElementById('ocell').innerHTML=Owins;
	document.getElementById('catcell').innerHTML=Catwins;

	$('table#tictactoe td').click(function(event){
		var clickCell = $('table#tictactoe td').index(event.target);
		$(this).unbind("click, hover",function(){});
		$('table#tictactoe td').removeClass("hovered");
		if(clickCount%2==0){
			$(this).addClass('clickedX');
			cellArray[clickCell]="X";
			if(checkForWinner("X")){
				resetWinner("xcell",Xwins,"X wins!",true);
			}
		}else{
			$(this).addClass('clickedO');
			cellArray[clickCell]="O";
			if(checkForWinner("O")){
				resetWinner("ocell",Owins,"O wins!",true);
			}
		}
		if((cellArray.indexOf("a")==-1)&&(boolWinner==false)){
			resetWinner("catcell",Catwins,"Cat game.",false);
		}
		clickCount++;
		//$('table#tictactoe td').unbind('click',function(event){});

	});

	$('#playButton').click(function(event){
		$('table#tictactoe td').bind('click',function(event){});
		$('td').removeClass();
		boolWinner=false;
		resetGame();
	});

	$('table#tictactoe td').hover(
		function(){$(this).addClass('hovered');},
		function(){$(this).removeClass('hovered');}
	);
});

checkForWinner=function(XorO){
	if((cellArray[0]==XorO && cellArray[1]==XorO && cellArray[2]==XorO) ||
		(cellArray[3]==XorO && cellArray[4]==XorO && cellArray[5]==XorO) ||
		(cellArray[6]==XorO && cellArray[7]==XorO && cellArray[8]==XorO) ||
		(cellArray[0]==XorO && cellArray[3]==XorO && cellArray[6]==XorO) ||
		(cellArray[1]==XorO && cellArray[4]==XorO && cellArray[7]==XorO) ||
		(cellArray[2]==XorO && cellArray[5]==XorO && cellArray[8]==XorO) ||
		(cellArray[0]==XorO && cellArray[4]==XorO && cellArray[8]==XorO) ||
		(cellArray[2]==XorO && cellArray[4]==XorO && cellArray[6]==XorO)){
		return true;
	}else{
		return false;
	}
}

resetWinner=function(cell,winCount,msg,winTF){
	boolWinner=winTF;
	winCount++;
	document.getElementById(cell).innerHTML=winCount;
	alert(msg);
	$('table#tictactoe td').unbind('click',function(){});
	resetGame();
}

resetGame=function(){
	clickCount=0;
	cellArray=["a","a","a","a","a","a","a","a","a"];
}
</script>
</head>
<body>
<center>
<h1>Tic Tac Toe</h1>
</center>
<table id="tictactoe" class="l_fixed">
	<tbody>
	<tr>
    	<td id="cell0"></td><td id="cell1"></td><td id="cell2"></td>
   	</tr>
   		<tr>
   		<td id="cell3"></td><td id="cell4"></td><td id="cell5"></td>
   	</tr>
   	<tr>
   		<td id="cell6"></td><td id="cell7"></td><td id="cell8"></td>
   	</tr>
   	</tbody>
</table>
<div></div>
<table id="results" class="r_fixed">
	<tbody>
	<tr>
		<th>X Wins</th>
		<th>O Wins</th>
		<th>Cat games</th>
	</tr>
	<tr>
		<td id="xcell"></td>
		<td id="ocell"></td>
		<td id="catcell"></td>
	</tr>
</table>
<br></br>
<button type="button" id="playButton" class="center">Play Again</button>
</body>
</html>